<!DOCTYPE html>
<html lang="en">
  
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./dice_css/dice.css">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <script src="https://cdn.lordicon.com/lordicon.js"></script>
  <title>Dice Game to pick a winner</title>
</head>

<body>
  <div class="full-container">
    <header class="winner-container">
      <h1 id="winner">And the winner is...</h1>
    </header>
    <div id="rollBtn" class="btn">Let's roll'em</div>
    <div class="players">
      <div class="players-left">
        <div class="celebrate">
          <h2 id="player-1-result"></h2>
          <lord-icon src="https://cdn.lordicon.com/twsqddew.json" trigger="loop" id="flag-1"><lord-icon>
        </div>
        <div class="player-container" id="player-1">
          <div class="player-info">
            <h2>Player 1</h2>
            <h3 class="wins">Wins: 0</h3>
            <h3 class="draws">Draws: 0</h3>
            <h3 class="losses">Losses: 0</h3>
          </div>
          <div id="btn-pips-1" class="btn">Change style</div>
          <div class="die-flex">
            <div id="dice-1" class="dice">
              <div id="pip" class="dot"></div>
            </div>
            <div id="dice-2" class="dice">
              <div class="dice-left">
                <div id="pip" class="dot"></div>
              </div>
                <div class="dice-right">
                  <div id="pip" class="dot"></div>
                </div>
            </div>
            <div id="dice-3" class="dice">
              <div class="dice-left">
                <div id="pip" class="dot"></div>
              </div>
              <div class="dice-center">
                <div id="pip" class="dot"></div>
              </div>
              <div class="dice-right">
                <div id="pip" class="dot"></div>
              </div>
            </div>
            <div id="dice-4" class="dice">
              <div class="dice-left">
                <div id="pip" class="dot"></div>
                <div id="pip" class="dot"></div>
              </div>
              <div class="dice-right">
                <div id="pip" class="dot"></div>
                <div id="pip" class="dot"></div>
              </div>
            </div>
            <div id="dice-5" class="dice">
              <div class="dice-left">
                <div id="pip" class="dot"></div>
                <div id="pip" class="dot"></div>
              </div>
              <div class="dice-center">
                <div id="pip" class="dot"></div>
              </div>
              <div class="dice-right">
                <div id="pip" class="dot"></div>
                <div id="pip" class="dot"></div>
              </div>
            </div>
            <div id="dice-6" class="dice">
              <div class="dice-left">
                <div id="pip" class="dot"></div>
                <div id="pip" class="dot"></div>
                <div id="pip" class="dot"></div>
              </div>
              <div class="dice-right">
                <div id="pip" class="dot"></div>
                <div id="pip" class="dot"></div>
                <div id="pip" class="dot"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="players-right">
        <div id="player-2" class="player-container">
          <div class="player-info">
            <h2>Player 2</h2>
            <h3 class="wins">Wins: 0</h3>
            <h3 class="draws">Draws: 0</h3>
            <h3 class="losses">Losses: 0</h3>
          </div>
          <div id="btn-pips-2" class="btn">Change style</div>
          <div class="die-grid">
            <div class="pip">
              <div id="pip" class="dot"></div>
            </div>
            <div class="pip">
              <div id="pip" class="dot"></div>
            </div>
            <div class="pip">
              <div id="pip" class="dot"></div>
            </div>
            <div class="pip">
              <div id="pip" class="dot"></div>
            </div>
            <div class="pip">
              <div id="pip" class="dot"></div>
            </div>
            <div class="pip">
              <div id="pip" class="dot"></div>
            </div>
            <div class="pip">
              <div id="pip" class="dot"></div>
            </div>
            <div class="pip">
              <div id="pip" class="dot"></div>
            </div>
            <div class="pip">
              <div id="pip" class="dot"></div>
            </div>
          </div>
        </div>
        <div class="celebrate">
          <h2 id="player-2-result"></h2>
          <lord-icon src="https://cdn.lordicon.com/twsqddew.json" trigger="loop" id="flag-2">
          </lord-icon>
        </div>
      </div>
    </div>
    <footer>
      <div class="dice-info">
        <p>Player 1 Dice created with Flex-box. Player 2 dice created with Grid.</p>
      </div>
      <div class="icons-info">
        <p>Celebration icons from <a href="https://lordicon.com/" target="_blank">Lordicon</a>.</p>
      </div>
      <div class="font-info">
        <p><span>Lobster</span> and Indie Flower cursive fonts from <a href="https://fonts.google.com/" target="_blank">Google Fonts</a>.</p>
      </div>
    </footer>
  </div>

  <script type="text/javascript" src="js/index.js" charset="utf-8"></script>

  <script>

    let player1Record = [0, 0, 0];
    let player2Record = [0, 0, 0];

    document.getElementById("rollBtn").addEventListener("click", rollEm);

    function rollEm() {

      // Generaates random number for each player
      let numPlayer1 = Math.floor(Math.random() * 6) + 1;
      let numPlayer2 = Math.floor(Math.random() * 6) + 1;

      // Resets flex-box dice when rolled
      let allDice = document.querySelectorAll(".dice");
      for (var i = 0; i < allDice.length; i++) {

        allDice[i].style.visibility = "hidden";
        allDice[i].style.position = "absolute";
      }

      // Get player 2 dice pips in array and resets when rolled
      let pips = document.querySelectorAll(".die-grid #pip");

      for (var pip = 0; pip < pips.length; pip++) {

        pips[pip].style.visibility = "hidden";
      }

      // Resets icon and winner text for both players
      document.getElementById("flag-1").style.visibility = "hidden";
      document.getElementById("flag-2").style.visibility = "hidden";
      document.getElementById("player-1-result").innerText = "";
      document.getElementById("player-2-result").innerText = "";

      // Conditionals to Show winner results on sides
      if (numPlayer1 == numPlayer2) {

        // Player 1 results, stats and celebration for a Draw
        document.getElementById("flag-1").style.visibility = "visible";
        document.getElementById("player-1-result").innerText = "Draw!";
        document.querySelector("#player-1 .draws").innerText = "Draws: " + ++player1Record[1] + ", " + 
          ((player1Record[1] / (player1Record[0] + player1Record[1] + player1Record [2])) * 100).toFixed(2) + "%";
        document.querySelector("#player-1 .wins").innerText = "Wins: " + player1Record[0] + ", " + 
          ((player1Record[0] / (player1Record[0] + player1Record[1] + player1Record [2])) * 100).toFixed(2) + "%";
        document.querySelector("#player-1 .losses").innerText = "Losses: " + player1Record[2] + ", " + 
          ((player1Record[2] / (player1Record[0] + player1Record[1] + player1Record [2])) * 100).toFixed(2) + "%";

        // Player 2 results, stats and celebration for a Draw
        document.getElementById("flag-2").style.visibility = "visible";
        document.getElementById("player-2-result").innerText = "Draw!";
        document.querySelector("#player-2 .draws").innerText = "Draws: " + ++player2Record[1] + ", " + 
          ((player2Record[1] / (player2Record[0] + player2Record[1] + player2Record [2])) * 100).toFixed(2) + "%";
        document.querySelector("#player-2 .wins").innerText = "Wins: " + player2Record[0] + ", " + 
          ((player2Record[0] / (player2Record[0] + player2Record[1] + player2Record [2])) * 100).toFixed(2) + "%";
        document.querySelector("#player-2 .losses").innerText = "Losses: " + player2Record[2] + ", " + 
          ((player2Record[2] / (player2Record[0] + player2Record[1] + player2Record [2])) * 100).toFixed(2) + "%";

        } else if (numPlayer1 > numPlayer2) {

        // Player 1 results, stats and celebration for a Player 1 win
        document.getElementById("flag-1").style.visibility = "visible";
        document.getElementById("player-1-result").innerText = "Player 1!"
        document.querySelector("#player-1 .wins").innerText = "Wins: " + ++player1Record[0] + ", " + 
          ((player1Record[0] / (player1Record[0] + player1Record[1] + player1Record[2])) * 100).toFixed(2) + "%";
        document.querySelector("#player-1 .draws").innerText = "Draws: " + player1Record[1] + ", " + 
          ((player1Record[1] / (player1Record[0] + player1Record[1] + player1Record[2])) * 100).toFixed(2) + "%";
        document.querySelector("#player-1 .losses").innerText = "Losses: " + player1Record[2] + ", " + 
          ((player1Record[2] / (player1Record[0] + player1Record[1] + player1Record[2])) * 100).toFixed(2) + "%";

        // Player 2 results and Stats for a Player 1 win
        document.querySelector("#player-2 .losses").innerText = "Losses: " + ++player2Record[2] + ", " + 
          ((player2Record[2] / (player2Record[0] + player2Record[1] + player2Record[2])) * 100).toFixed(2) + "%";
        document.querySelector("#player-2 .wins").innerText = "Wins: " + player2Record[0] + ", " + 
          ((player2Record[0] / (player2Record[0] + player2Record[1] + player2Record[2])) * 100).toFixed(2) + "%";
        document.querySelector("#player-2 .draws").innerText = "Draws: " + player2Record[1] + ", " + 
          ((player2Record[1] / (player2Record[0] + player2Record[1] + player2Record[2])) * 100).toFixed(2) + "%";

        } else if (numPlayer1 < numPlayer2) {

        // Player 2 results, stats and celebration for a Player 2 win
        document.getElementById("flag-2").style.visibility = "visible";
        document.getElementById("player-2-result").innerText = "Player 2!"
        document.querySelector("#player-2 .wins").innerText = "Wins: " + ++player2Record[0] + ", " + 
          ((player2Record[0] / (player2Record[0] + player2Record[1] + player2Record[2])) * 100).toFixed(2) + "%";
        document.querySelector("#player-2 .draws").innerText = "Draws: " + player2Record[1] + ", " + 
          ((player2Record[1] / (player2Record[0] + player2Record[1] + player2Record[2])) * 100).toFixed(2) + "%";
        document.querySelector("#player-2 .losses").innerText = "Losses: " + player2Record[2] + ", " + 
          ((player2Record[2] / (player2Record[0] + player2Record[1] + player2Record[2])) * 100).toFixed(2) + "%";

        // Player 1 results and stats for a Player 2 win
        document.querySelector("#player-1 .losses").innerText = "Losses: " + ++player1Record[2] + ", " + 
          ((player1Record[2] / (player1Record[0] + player1Record[1] + player1Record[2])) * 100).toFixed(2) + "%";
        document.querySelector("#player-1 .wins").innerText = "Wins: " + player1Record[0] + ", " + 
          ((player1Record[0] / (player1Record[0] + player1Record[1] + player1Record[2])) * 100).toFixed(2) + "%";
        document.querySelector("#player-1 .draws").innerText = "Draws: " + player1Record[1] + ", " + 
          ((player1Record[1] / (player1Record[0] + player1Record[1] + player1Record[2])) * 100).toFixed(2) + "%";
      }

      // Conditionals to Show player 1 dice
      if (numPlayer1 == 1) {

        let diceStyle = document.querySelector("#player-1 #dice-1").style;

        diceStyle.position = "relative";
        diceStyle.visibility = "visible";
      } else if (numPlayer1 == 2) {

        let diceStyle = document.querySelector("#player-1 #dice-2").style;

        diceStyle.position = "relative";
        diceStyle.visibility = "visible";
      } else if (numPlayer1 == 3) {

        let diceStyle = document.querySelector("#player-1 #dice-3").style;

        diceStyle.position = "relative";
        diceStyle.visibility = "visible";
      } else if (numPlayer1 == 4) {

        let diceStyle = document.querySelector("#player-1 #dice-4").style;

        diceStyle.position = "relative";
        diceStyle.visibility = "visible";
      } else if (numPlayer1 == 5) {

        let diceStyle = document.querySelector("#player-1 #dice-5").style;

        diceStyle.position = "relative";
        diceStyle.visibility = "visible";
      } else if (numPlayer1 == 6) {

        let diceStyle = document.querySelector("#player-1 #dice-6").style;

        diceStyle.position = "relative";
        diceStyle.visibility = "visible";
      }

      // Conditionals to show die pips according to number rolled
      if (numPlayer2 == 1) {

        pips[4].style.visibility = "visible";
      } else if (numPlayer2 == 2) {

        pips[2].style.visibility = "visible";
        pips[6].style.visibility = "visible";
      } else if (numPlayer2 == 3) {

        pips[0].style.visibility = "visible";
        pips[4].style.visibility = "visible";
        pips[8].style.visibility = "visible";
      } else if (numPlayer2 == 4) {

        pips[0].style.visibility = "visible";
        pips[2].style.visibility = "visible";
        pips[6].style.visibility = "visible";
        pips[8].style.visibility = "visible";
      } else if (numPlayer2 == 5) {

        pips[0].style.visibility = "visible";
        pips[2].style.visibility = "visible";
        pips[4].style.visibility = "visible";
        pips[6].style.visibility = "visible";
        pips[8].style.visibility = "visible";
      } else if (numPlayer2 == 6) {

        pips[0].style.visibility = "visible";
        pips[2].style.visibility = "visible";
        pips[3].style.visibility = "visible";
        pips[5].style.visibility = "visible";
        pips[6].style.visibility = "visible";
        pips[8].style.visibility = "visible";
      }
    }
  </script>

</body>
</html>